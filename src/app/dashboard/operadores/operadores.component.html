<h2 class="mb-4">Gesti√≥n de Operadores</h2>

<!-- =============================== -->
<!-- üîπ FORMULARIO -->
<!-- =============================== -->
<div class="card mb-4 p-3">
  <h4>{{ editMode ? "Editar Operador" : "Crear Operador" }}</h4>

  <form (ngSubmit)="guardarOperador()">
    <div class="mb-3">
      <label class="form-label">Nombre</label>
      <input
        class="form-control"
        [(ngModel)]="operadorForm.nombre"
        name="nombre"
        required
      />
    </div>

    <div class="mb-3">
      <label class="form-label">Usuario</label>
      <input
        class="form-control"
        [(ngModel)]="operadorForm.user!.username"
        name="username"
        required
      />
    </div>

    <!-- Solo pedir contrase√±a si se crea y no si se edita -->
    <div class="mb-3" *ngIf="!editMode">
      <label class="form-label">Contrase√±a</label>
      <input
        type="password"
        class="form-control"
        [(ngModel)]="operadorForm.user!.password"
        name="password"
        required
      />
    </div>

    <button class="btn btn-primary me-2">
      {{ editMode ? "Actualizar" : "Crear" }}
    </button>
    <button type="button" class="btn btn-secondary" (click)="resetForm()">
      Limpiar
    </button>
  </form>
</div>

<!-- =============================== -->
<!-- üîπ TABLA DE OPERADORES -->
<!-- =============================== -->
<table class="table table-striped table-bordered align-middle">
  <thead class="table-dark">
    <tr>
      <th>ID</th>
      <th>Nombre</th>
      <th>Usuario</th>
      <th>Acciones</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let op of operadores">
      <td>{{ op.id }}</td>
      <td>{{ op.nombre }}</td>
      <td>{{ op.user?.username }}</td>

      <td>
        <button
          class="btn btn-warning btn-sm me-2"
          (click)="editarOperador(op)"
        >
          Editar
        </button>

        <button class="btn btn-danger btn-sm" (click)="eliminarOperador(op.id)">
          Eliminar
        </button>
      </td>
    </tr>
  </tbody>
</table>

<!-- Si no hay operadores -->
<div *ngIf="operadores.length === 0" class="alert alert-info mt-3">
  No hay operadores registrados.
</div>
